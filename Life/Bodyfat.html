<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Body Fat Calculator â€“ Accurate Body Composition</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --primary:#2563eb;
  --bg:#f4f7fb;
  --card:#ffffff;
  --radius:16px;
  --text:#1f2937;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,Arial;
  background:var(--bg);
  color:var(--text);
}
.container{
  max-width:1200px;
  margin:auto;
  padding:20px;
}
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:30px;
  box-shadow:0 14px 36px rgba(0,0,0,.08);
}
h1{margin:0;color:var(--primary)}
small{color:#555}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:18px;
}

input,select{
  width:100%;
  padding:14px;
  font-size:16px;
  border-radius:10px;
  border:1px solid #ddd;
}

button{
  width:100%;
  padding:18px;
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:14px;
  font-size:18px;
  cursor:pointer;
}
button:hover{opacity:.95}

.result{
  font-weight:700;
  font-size:18px;
  line-height:1.9;
}
.error{color:#dc2626;font-weight:600}

canvas{
  width:100%!important;
  height:300px!important;
}
</style>
</head>

<body>
<div class="container">

<!-- INPUT -->
<div class="card">
<h1>Body Fat Calculator</h1>
<small>Estimate body fat percentage & lean mass (U.S. Navy Method)</small>
<br><br>

<div class="grid">
  <select id="gender">
    <option value="">Gender</option>
    <option value="male">Male</option>
    <option value="female">Female</option>
  </select>

  <input id="height" type="number" placeholder="Height (cm)">
  <input id="weight" type="number" placeholder="Weight (kg)">

  <input id="neck" type="number" placeholder="Neck circumference (cm)">
  <input id="waist" type="number" placeholder="Waist circumference (cm)">
  <input id="hip" type="number" placeholder="Hip circumference (cm) â€“ Female only">
</div>

<br>
<button onclick="calculateBodyFat()">Calculate Body Fat</button>
<div id="error" class="error"></div>
</div>

<br>

<!-- RESULT -->
<div class="grid">
  <div class="card">
    <div id="output" class="result">Result = â€”</div>
    <small>Body composition breakdown (Fat vs Lean Mass)</small>
  </div>
  <div class="card">
    <canvas id="chart"></canvas>
  </div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let chart;

function calculateBodyFat(){
  const err=document.getElementById("error");
  err.innerText="";

  const gender=document.getElementById("gender").value;
  const height=+document.getElementById("height").value;
  const weight=+document.getElementById("weight").value;
  const neck=+document.getElementById("neck").value;
  const waist=+document.getElementById("waist").value;
  const hip=+document.getElementById("hip").value;

  if(!gender||!height||!weight||!neck||!waist){
    err.innerText="Please fill all required fields.";
    return;
  }

  if(height<120||weight<30||neck<20||waist<50){
    err.innerText="Please enter realistic body measurements.";
    return;
  }

  if(gender==="female" && hip<60){
    err.innerText="Hip measurement is required for females.";
    return;
  }

  if(
    (gender==="male" && waist<=neck) ||
    (gender==="female" && waist+hip<=neck)
  ){
    err.innerText="Waist and hip measurements must be greater than neck.";
    return;
  }

  let bodyFat;
  if(gender==="male"){
    bodyFat = 86.010*Math.log10(waist-neck)
            - 70.041*Math.log10(height)
            + 36.76;
  }else{
    bodyFat = 163.205*Math.log10(waist+hip-neck)
            - 97.684*Math.log10(height)
            - 78.387;
  }

  bodyFat=Math.min(Math.max(bodyFat,2),60);

  const fatMass=weight*(bodyFat/100);
  const leanMass=weight-fatMass;

  document.getElementById("output").innerHTML=`
    ðŸ§ Body Fat: ${bodyFat.toFixed(1)}%<br>
    ðŸ”´ Fat Mass: ${fatMass.toFixed(1)} kg<br>
    ðŸŸ¢ Lean Mass: ${leanMass.toFixed(1)} kg
  `;

  drawChart(fatMass,leanMass);
}

function drawChart(fat,lean){
  const ctx=document.getElementById("chart").getContext("2d");
  if(chart) chart.destroy();

  chart=new Chart(ctx,{
    type:"pie",
    data:{
      labels:["Fat Mass","Lean Mass"],
      datasets:[{
        data:[fat,lean],
        backgroundColor:["#fca5a5","#86efac"]
      }]
    },
    options:{
      responsive:true,
      plugins:{
        legend:{position:"bottom"},
        tooltip:{
          callbacks:{
            label:(c)=>`${c.label}: ${c.parsed.toFixed(1)} kg`
          }
        }
      }
    }
  });
}
</script>

</body>
</html>
