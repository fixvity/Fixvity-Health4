<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Body Fat Calculator – Professional</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --primary:#2563eb;
  --bg:#f4f7fb;
  --card:#ffffff;
  --radius:16px;
  --text:#1f2937;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,Arial;
  background:var(--bg);
  color:var(--text);
}
.container{
  max-width:1200px;
  margin:auto;
  padding:20px;
}
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:30px;
  box-shadow:0 14px 36px rgba(0,0,0,.08);
}
h1{margin:0;color:var(--primary)}
small{color:#555}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:20px;
}

input,select{
  width:100%;
  padding:14px;
  font-size:16px;
  border-radius:10px;
  border:1px solid #ddd;
}

button{
  width:100%;
  padding:18px;
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:14px;
  font-size:18px;
  cursor:pointer;
}
button:hover{opacity:.95}

.error{color:#dc2626;font-weight:600}

table{
  width:100%;
  border-collapse:collapse;
}
td{
  padding:9px 6px;
  border-bottom:1px solid #eee;
}

.chart-wrap{
  position:relative;
  height:340px;
}
.chart-center{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
}
.chart-center b{
  font-size:26px;
  display:block;
}
.chart-center span{
  color:#555;
  font-size:14px;
}
</style>
</head>

<body>
<div class="container">

<!-- INPUT -->
<div class="card">
<h1>Body Fat Calculator</h1>
<small>U.S. Navy Method · Medical-grade accuracy · US & Metric units</small>
<br><br>

<div class="grid">
  <select id="unit">
    <option value="metric">Metric (cm / kg)</option>
    <option value="us">US Units (in / lb)</option>
  </select>

  <select id="gender">
    <option value="">Gender</option>
    <option value="male">Male</option>
    <option value="female">Female</option>
  </select>

  <input id="age" type="number" placeholder="Age (years)">
  <input id="height" type="number" placeholder="Height">
  <input id="weight" type="number" placeholder="Weight">
  <input id="neck" type="number" placeholder="Neck circumference">
  <input id="waist" type="number" placeholder="Waist circumference">
  <input id="hip" type="number" placeholder="Hip (female only)">
</div>

<br>
<button onclick="calculateBodyFat()">Calculate</button>
<div id="error" class="error"></div>
</div>

<br>

<!-- RESULTS -->
<div class="grid">
  <div class="card">
    <div id="output">Result = —</div>
  </div>

  <div class="card">
    <div class="chart-wrap">
      <canvas id="chart"></canvas>
      <div class="chart-center" id="centerText"></div>
    </div>
  </div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let chart;

function calculateBodyFat(){
  const err=document.getElementById("error");
  err.innerText="";

  const unit=document.getElementById("unit").value;
  const gender=document.getElementById("gender").value;
  const age=+ageEl.value;
  let h=+height.value,w=+weight.value,n=+neck.value,wa=+waist.value,hi=+hip.value;

  if(!gender||!age||!h||!w||!n||!wa){
    err.innerText="Please fill all required fields.";
    return;
  }
  if(unit==="us"){ h*=2.54; w*=0.453592; n*=2.54; wa*=2.54; hi*=2.54; }
  if(gender==="female"&&!hi){ err.innerText="Hip required for females."; return; }

  let bf = gender==="male"
    ? 86.01*Math.log10(wa-n)-70.041*Math.log10(h)+36.76
    : 163.205*Math.log10(wa+hi-n)-97.684*Math.log10(h)-78.387;

  bf=Math.min(Math.max(bf,2),60);
  const fat=w*(bf/100), lean=w-fat;

  let cat=bf<6?"Essential":bf<14?"Athletes":bf<18?"Fitness":bf<25?"Average":"Obese";
  const ideal=Math.max(8,18-(age-20)*0.2);
  const lose=Math.max(0,w*(bf-ideal)/100);
  const bmi=w/((h/100)**2);
  const bmiBF=gender==="male"?1.2*bmi+0.23*age-16.2:1.2*bmi+0.23*age-5.4;

  output.innerHTML=`
  <table>
    <tr><td><b>Body Fat</b></td><td>${bf.toFixed(1)}%</td></tr>
    <tr><td>Category</td><td>${cat}</td></tr>
    <tr><td>Fat Mass</td><td>${fat.toFixed(1)} kg</td></tr>
    <tr><td>Lean Mass</td><td>${lean.toFixed(1)} kg</td></tr>
    <tr><td>Ideal Body Fat</td><td>${ideal.toFixed(1)}%</td></tr>
    <tr><td>Fat to Lose</td><td>${lose.toFixed(1)} kg</td></tr>
    <tr><td>BMI Method (ref)</td><td>${bmiBF.toFixed(1)}%</td></tr>
  </table>`;

  centerText.innerHTML=`<b>${bf.toFixed(1)}%</b><span>${cat}</span>`;

  if(chart)chart.destroy();
  chart=new Chart(chartEl,{
    type:"doughnut",
    data:{
      labels:["Fat Mass","Lean Mass"],
      datasets:[{
        data:[fat,lean],
        backgroundColor:["#f87171","#4ade80"]
      }]
    },
    options:{
      cutout:"70%",
      plugins:{legend:{position:"bottom"}}
    }
  });
}

const ageEl=document.getElementById("age"),
height=document.getElementById("height"),
weight=document.getElementById("weight"),
neck=document.getElementById("neck"),
waist=document.getElementById("waist"),
hip=document.getElementById("hip"),
output=document.getElementById("output"),
centerText=document.getElementById("centerText"),
chartEl=document.getElementById("chart").getContext("2d");
</script>

</body>
</html>
